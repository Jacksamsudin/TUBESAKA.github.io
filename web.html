<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>TUBES AKA - Analisis Kompleksitas Algoritma Iteratif dan Rekursif</title>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
      min-height: 100vh;
      padding: 20px;
    }

    .container {
      max-width: 1200px;
      margin: 0 auto;
    }

    h1 {
      text-align: center;
      color: white;
      font-size: 2.2em;
      margin-bottom: 10px;
      text-shadow: 2px 2px 4px rgba(0,0,0,0.2);
    }

    .subtitle {
      text-align: center;
      color: rgba(255,255,255,0.95);
      font-size: 1em;
      margin-bottom: 30px;
    }

    .box {
      background: white;
      padding: 25px;
      margin-bottom: 20px;
      border-radius: 12px;
      box-shadow: 0 4px 15px rgba(0,0,0,0.1);
    }

    h2 {
      color: #2c3e50;
      margin-bottom: 15px;
      font-size: 1.6em;
      border-bottom: 3px solid #4facfe;
      padding-bottom: 8px;
    }

    h3 {
      color: #34495e;
      margin: 15px 0 10px;
      font-size: 1.2em;
    }

    p {
      line-height: 1.7;
      color: #555;
      margin-bottom: 12px;
    }

    .input-group {
      margin: 15px 0;
    }

    label {
      display: block;
      font-weight: 600;
      color: #333;
      margin-bottom: 6px;
    }

    input[type="number"] {
      width: 100%;
      padding: 10px;
      border: 2px solid #ddd;
      border-radius: 8px;
      font-size: 15px;
      transition: border-color 0.3s;
    }

    input[type="number"]:focus {
      outline: none;
      border-color: #4facfe;
    }

    button {
      background: #4facfe;
      color: white;
      border: none;
      padding: 10px 25px;
      border-radius: 8px;
      font-size: 15px;
      font-weight: 600;
      cursor: pointer;
      transition: background 0.3s;
      margin: 8px 5px 8px 0;
    }

    button:hover {
      background: #3498db;
    }

    button.secondary {
      background: #95a5a6;
    }

    button.secondary:hover {
      background: #7f8c8d;
    }

    button.danger {
      background: #e74c3c;
    }

    button.danger:hover {
      background: #c0392b;
    }

    #inputData {
      margin: 15px 0;
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
      gap: 12px;
    }

    .data-input label {
      font-size: 13px;
      color: #555;
    }

    .result {
      background: #e8f5e9;
      border-left: 4px solid #4caf50;
      color: #2e7d32;
      padding: 15px;
      border-radius: 8px;
      margin-top: 15px;
      font-size: 1.1em;
    }

    .time-result {
      background: #fff3e0;
      border-left: 4px solid #ff9800;
      color: #e65100;
      padding: 12px;
      border-radius: 8px;
      margin-top: 10px;
      font-size: 0.95em;
    }

    .code-container {
      background: #f8f9fa;
      border: 1px solid #dee2e6;
      border-radius: 8px;
      padding: 15px;
      margin: 15px 0;
      display: none;
    }

    .code-container.show {
      display: block;
    }

    pre {
      background: #282c34;
      color: #abb2bf;
      padding: 15px;
      border-radius: 6px;
      overflow-x: auto;
      font-size: 14px;
      line-height: 1.5;
    }

    .code-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 10px;
    }

    .code-title {
      font-weight: 600;
      color: #2c3e50;
    }

    .complexity-badge {
      background: #4facfe;
      color: white;
      padding: 4px 12px;
      border-radius: 15px;
      font-size: 13px;
      font-weight: 600;
    }

    #runtimeChart {
      max-height: 400px;
      margin-top: 20px;
    }

    .info-box {
      background: #e3f2fd;
      border-left: 4px solid #2196f3;
      padding: 15px;
      border-radius: 8px;
      margin: 15px 0;
    }

    .info-box strong {
      color: #1976d2;
    }

    footer {
      text-align: center;
      color: white;
      padding: 25px;
      margin-top: 30px;
      font-size: 14px;
    }

    @media (max-width: 768px) {
      h1 { font-size: 1.8em; }
      .box { padding: 20px; }
      #inputData { grid-template-columns: 1fr; }
    }
  </style>
</head>

<body>
  <div class="container">
    <h1>Tugas Besar Analisis Kompleksitas Algoritma</h1>
    <p class="subtitle">S1 Rekayasa Perangkat Lunak – Telkom University</p>

    <div class="box">
      <h2>Studi Kasus</h2>
      <p>
        Studi kasus yang digunakan adalah <b>perhitungan total konsumsi listrik harian</b>
        berdasarkan data penggunaan listrik (kWh) selama beberapa hari.
        Permasalahan ini diselesaikan menggunakan dua pendekatan algoritma, yaitu
        <b>iteratif</b> dan <b>rekursif</b>, untuk dibandingkan dari sisi efisiensi.
      </p>
    </div>

    <div class="box">
      <h2>Input Data Konsumsi Listrik</h2>
      <div class="input-group">
        <label>Jumlah Hari:</label>
        <input type="number" id="jumlahHari" min="1" placeholder="Masukkan jumlah hari...">
      </div>
      <button onclick="buatInput()">Buat Input</button>

      <div id="inputData"></div>

      <button onclick="hitungTotal()">Hitung Total & Ukur Waktu</button>

      <div id="hasil"></div>
    </div>

    <div class="box">
      <h2>Deskripsi Algoritma</h2>

      <h3>Algoritma Iteratif</h3>
      <p>
        Algoritma iteratif menghitung total konsumsi listrik dengan menggunakan perulangan
        untuk menjumlahkan seluruh elemen array satu per satu.
      </p>
      <p><b>Kompleksitas Waktu:</b> O(n)</p>
      <button class="secondary" onclick="toggleCode('iteratif')">Lihat Kode</button>

      <div id="code-iteratif" class="code-container">
        <div class="code-header">
          <span class="code-title">Kode Iteratif</span>
          <span class="complexity-badge">O(n)</span>
        </div>
        <pre><code>function totalIteratif(data) {
  let total = 0;
  for (let i = 0; i < data.length; i++) {
    total += data[i];
  }
  return total;
}</code></pre>
      </div>

      <h3>Algoritma Rekursif</h3>
      <p>
        Algoritma rekursif menghitung total konsumsi listrik dengan memanggil fungsi secara
        berulang hingga mencapai kondisi dasar (base case).
      </p>
      <p><b>Kompleksitas Waktu:</b> O(n)</p>
      <button class="secondary" onclick="toggleCode('rekursif')">Lihat Kode</button>

      <div id="code-rekursif" class="code-container">
        <div class="code-header">
          <span class="code-title">Kode Rekursif</span>
          <span class="complexity-badge">O(n)</span>
        </div>
        <pre><code>function totalRekursif(data, n) {
  if (n === 0) return 0;
  return data[n - 1] + totalRekursif(data, n - 1);
}</code></pre>
      </div>
    </div>

    <div class="box">
      <h2>Grafik Perbandingan Running Time</h2>
      <div class="info-box">
        <strong>Info:</strong> Grafik ini akan diupdate setiap kali Anda menghitung total konsumsi listrik. 
        Data running time akan ditambahkan berdasarkan ukuran input yang Anda masukkan.
      </div>
      <button class="danger" onclick="resetGrafik()">Reset Grafik</button>
      <canvas id="runtimeChart"></canvas>
    </div>

    <div class="box">
      <h2>Analisis Perbandingan</h2>
      <p>
        Berdasarkan grafik running time, algoritma iteratif memiliki waktu eksekusi yang
        lebih stabil dibandingkan algoritma rekursif. Walaupun kedua algoritma memiliki
        kompleksitas waktu O(n), algoritma rekursif memiliki overhead pemanggilan fungsi
        yang menyebabkan waktu eksekusi relatif lebih besar.
      </p>
      <div class="info-box">
        <strong>Kelas Kompleksitas:</strong>
        <ul style="margin-top: 10px; margin-left: 20px;">
          <li><strong>Iteratif:</strong> O(n) - Linear time complexity</li>
          <li><strong>Rekursif:</strong> O(n) - Linear time complexity dengan overhead function call</li>
        </ul>
      </div>
    </div>

    <footer>
      <p>
        Tugas Besar Analisis Kompleksitas Algoritma<br>
        S1 Rekayasa Perangkat Lunak – Telkom University
      </p>
    </footer>
  </div>

<script>
  let myChart = null;
  let chartData = {
    sizes: [],
    timeIteratif: [],
    timeRekursif: []
  };

  function totalIteratif(data) {
    let total = 0;
    for (let i = 0; i < data.length; i++) {
      total += data[i];
    }
    return total;
  }

  function totalRekursif(data, n) {
    if (n === 0) return 0;
    return data[n - 1] + totalRekursif(data, n - 1);
  }

  function toggleCode(type) {
    const codeDiv = document.getElementById('code-' + type);
    codeDiv.classList.toggle('show');
  }

  function buatInput() {
    const n = parseInt(document.getElementById("jumlahHari").value);
    const container = document.getElementById("inputData");
    container.innerHTML = "";

    if (isNaN(n) || n <= 0) {
      container.innerHTML = "<p style='color: #e74c3c;'>Masukkan jumlah hari yang valid.</p>";
      return;
    }

    for (let i = 0; i < n; i++) {
      const div = document.createElement('div');
      div.className = 'data-input';
      div.innerHTML = `
        <label>Hari ke-${i + 1}:</label>
        <input type="number" class="data" min="0" placeholder="kWh" value="0">
      `;
      container.appendChild(div);
    }
  }

  function hitungTotal() {
    const inputs = document.querySelectorAll(".data");
    let data = [];

    inputs.forEach(input => {
      let value = parseInt(input.value);
      data.push(isNaN(value) ? 0 : value);
    });

    if (data.length === 0) {
      document.getElementById("hasil").innerHTML = 
        "<p style='color: #e74c3c;'>Silakan buat input terlebih dahulu.</p>";
      return;
    }

    const REPEAT = 1000;
    const n = data.length;

    // Ukur waktu ITERATIF
    let startIter = performance.now();
    for (let r = 0; r < REPEAT; r++) {
      totalIteratif(data);
    }
    let endIter = performance.now();
    let timeIter = (endIter - startIter) / REPEAT;

    // Ukur waktu REKURSIF
    let startRek = performance.now();
    for (let r = 0; r < REPEAT; r++) {
      totalRekursif(data, data.length);
    }
    let endRek = performance.now();
    let timeRek = (endRek - startRek) / REPEAT;

    const iteratif = totalIteratif(data);
    const rekursif = totalRekursif(data, data.length);

    document.getElementById("hasil").innerHTML =
      `<div class="result">
        <div><strong>Total Konsumsi (Iteratif):</strong> ${iteratif} kWh</div>
        <div style="margin-top: 8px;"><strong>Total Konsumsi (Rekursif):</strong> ${rekursif} kWh</div>
      </div>
      <div class="time-result">
        <div><strong>⏱️ Running Time (Ukuran Input: ${n}):</strong></div>
        <div style="margin-top: 5px;">• Iteratif: ${timeIter.toFixed(6)} ms</div>
        <div>• Rekursif: ${timeRek.toFixed(6)} ms</div>
        <div style="margin-top: 5px; font-size: 0.9em;">* Rata-rata dari ${REPEAT} kali eksekusi</div>
      </div>`;

    // Tambahkan data ke grafik
    tambahDataKeGrafik(n, timeIter, timeRek);
  }

  function tambahDataKeGrafik(size, timeIter, timeRek) {
    // Cek apakah ukuran ini sudah ada, kalau ada replace
    const index = chartData.sizes.indexOf(size);
    if (index !== -1) {
      chartData.timeIteratif[index] = timeIter;
      chartData.timeRekursif[index] = timeRek;
    } else {
      chartData.sizes.push(size);
      chartData.timeIteratif.push(timeIter);
      chartData.timeRekursif.push(timeRek);
      
      // Sort data berdasarkan size
      const combined = chartData.sizes.map((s, i) => ({
        size: s,
        iter: chartData.timeIteratif[i],
        rek: chartData.timeRekursif[i]
      }));
      combined.sort((a, b) => a.size - b.size);
      
      chartData.sizes = combined.map(d => d.size);
      chartData.timeIteratif = combined.map(d => d.iter);
      chartData.timeRekursif = combined.map(d => d.rek);
    }

    updateGrafik();
  }

  function updateGrafik() {
    if (myChart) {
      myChart.data.labels = chartData.sizes;
      myChart.data.datasets[0].data = chartData.timeIteratif;
      myChart.data.datasets[1].data = chartData.timeRekursif;
      myChart.update();
    }
  }

  function resetGrafik() {
    if (confirm("Apakah Anda yakin ingin mereset data grafik?")) {
      chartData = {
        sizes: [],
        timeIteratif: [],
        timeRekursif: []
      };
      updateGrafik();
    }
  }

  function initGrafik() {
    const ctx = document.getElementById("runtimeChart");
    myChart = new Chart(ctx, {
      type: "line",
      data: {
        labels: chartData.sizes,
        datasets: [
          {
            label: "Iteratif",
            data: chartData.timeIteratif,
            borderColor: "#1abc9c",
            backgroundColor: "#1abc9c",
            pointRadius: 6,
            pointHoverRadius: 8,
            tension: 0.4
          },
          {
            label: "Rekursif",
            data: chartData.timeRekursif,
            borderColor: "#e74c3c",
            backgroundColor: "#e74c3c",
            pointRadius: 6,
            pointHoverRadius: 8,
            tension: 0.4
          }
        ]
      },
      options: {
        responsive: true,
        plugins: {
          legend: {
            position: "top"
          },
          title: {
            display: true,
            text: "Perbandingan Running Time Algoritma Iteratif vs Rekursif"
          },
          tooltip: {
            callbacks: {
              label: function(context) {
                return context.dataset.label + ': ' + context.parsed.y.toFixed(6) + ' ms';
              }
            }
          }
        },
        scales: {
          x: {
            title: {
              display: true,
              text: "Ukuran Input (n)"
            }
          },
          y: {
            title: {
              display: true,
              text: "Running Time (ms)"
            },
            beginAtZero: true
          }
        }
      }
    });
  }

  window.onload = initGrafik;
</script>

</body>
</html>
